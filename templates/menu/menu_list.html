{% extends "base.html" %}
{% load static wagtailcore_tags i18n %}
 {% block title %}
Lista jadłospisów
{% endblock %}
{% block body_class %}bg-[#dde6e5]{% endblock %}
{% block content %}
<main id="main-menu" class="modal-wrapper max-w-[1200px] mx-auto px-2 flex flex-col justify-center lg:justify-start items-center lg:items-start w-full">
    <div class="flex flex-wrap items-center justify-center sm:justify-between gap-3">
        <h1 class="font-bold text-3xl my-6 lg:my-10">Lista jadłospisów</h1>
        <a href="{% url 'menu:create' %}"
            hx-get="{% url 'menu:create' %}"
            hx-target="#main-menu"
            hx-swap="outerHTML"
            class="flex gap-2 items-center
                  px-4 py-2 my-1 rounded-full font-semibold uppercase cursor-pointer bg-gray-50 border-2 border-teal-800
                  hover:ring-2 hover:ring-teal-800 hover:bg-[#d4bf79] hover:ring-offset-2
                  transition-all duration-300">
         <svg class="w-6 h-6 fill-teal-800" alt="" aria-hidden="true">
            <use href="{% static 'img/sprite.svg' %}#plus2" />
        </svg> Dodaj nowy
        </a>
    </div>
    <form method="get"
        class="mb-6 w-full">
        <label for="id_query" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Znajdź potrawę</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                </svg>
            </div>
            <input type="search" id="id_query" name="query"
            hx-get="{% url 'menu:list' %}"
            hx-trigger="input changed delay:500ms, keyup[key=='Enter'], load"
            hx-target="#menu-list"
            hx-select="#menu-list"
            autocomplete="off"
            class="block w-full p-4 ps-10 text-gray-900 border border-gray-300 rounded-lg
            bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:text-white dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400
            dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Wpisz potrawę" required />
            <button type="submit" class="text-white absolute end-2.5 bottom-2.5 bg-teal-800 hover:bg-teal-700 dark:bg-teal-700
            focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg font-semibold px-4 py-2  dark:focus:ring-blue-800 cursor-pointer">Wyszukaj</button>
        </div>
    </form>
    <div id="menu-list" class="flex flex-wrap justify-center lg:justify-start gap-3">
        {% for menu in menu_list %}
        <a href="{% url 'menu:detail' menu.id %}"
            hx-get="{% url 'menu:detail' menu.id %}"
            hx-target="#main-menu"
            hx-swap="outerHTML"
            hx-push-url="true"
            class="max-w-max flex justify-center items-center gap-2
          border-[#d3af37] border-2  bg-gray-50 px-4 py-2 my-1 rounded-full font-semibold
            uppercase cursor-pointer
            hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2 hover:bg-[#d4bf79]
            transition-all duration-300">
            {{ menu.date_from|date:"d.m." }} - {{ menu.date_to|date:"d.m.Y" }}
        </a>
        {% endfor %}
        {% if not menu_list %}
        <p class="font-semibold text-lg">Brak jadłospisów</p>
        {% endif %}
    </div>
    <div class="modalBackground hidden"></div>
    <div id="form-wrapper">
        <div role="dialog" id="modal" aria-labelledby="modal-title"
            hx-target="this"
            class="no-inert modalbox hidden bg-neutral-50 rounded-md lg:w-96
            px-2 py-3 md:p-6 lg:px-12 lg:py-6"
            tabindex="-1">
        </div>
    </div>
    <div id="messages-box3" class="text-red-700 font-semibold mt-4"></div>
</main>
{% endblock content %}