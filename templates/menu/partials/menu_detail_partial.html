{% load static wagtailcore_tags i18n %}
<div id="menu-detail" >
    <title id="pageTitle" hx-swap-oob="true">Jadłospis</title>
     <div id="spinner" class="request-indicator htmx-indicator absolute inset-0 w-full min-h-dvh bg-neutral-200 z-30">
        <div class="loader-circle absolute top-1/2 left-1/2 -translate-x-1/2 z-30"></div>
    </div>
    <main class="max-w-[1200px] mx-auto px-2 pt-2 pb-10"
        hx-get="{% url 'menu:list' %}"
        hx-trigger="menuDeleted from:body"
        hx-swap="outerHTML">
        <div class="flex flex-wrap items-center gap-3">
            <a href="{% url 'menu:list' %}"
                hx-get="{% url 'menu:list' %}"
                hx-target="#menu-detail"
                hx-swap="outerHTML"
                hx-push-url="true"
                class="max-w-max flex justify-center items-center gap-2
            border-[#d3af37] border-2  bg-gray-50 px-4 py-2 my-1 rounded-full font-semibold uppercase cursor-pointer
                hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2 hover:bg-[#d4bf79]
                transition-all duration-300" type="submit">
                <svg class="w-4 h-4 fill-neutral-800" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#list" />
                </svg>
                Lista
            </a>
            {% if menu %}
            <a href="{% url 'menu:update' menu.id %}"
                hx-get="{% url 'menu:update' menu.id %}"
                hx-target="#menu-detail"
                hx-swap="outerHTML"
                hx-push-url="true"
                hx-indicator="#spinner, .loaded-content"
                class="max-w-max flex justify-center items-center gap-2
            border-[#d3af37] border-2  bg-gray-50 px-4 py-2 my-1 rounded-full font-semibold uppercase cursor-pointer
                hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2 hover:bg-[#d4bf79]
                transition-all duration-300" type="submit">
                <svg class="w-4 h-4 fill-neutral-800" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#pencil" />
                </svg>
                Edytuj
            </a>
            <a class="max-w-max flex justify-center items-center gap-2
            border-[#d3af37] border-2  bg-gray-50 px-4 py-2 my-1 rounded-full font-semibold uppercase cursor-pointer
                hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2 hover:bg-[#d4bf79]
                transition-all duration-300"
                hx-delete="{% url 'menu:delete' menu.id %}"
                hx-target="#menu-detail"
                hx-swap="outerHTML"
                confirm-swal="jadłospis od {{ menu.date_from|date:'d.m.' }} do {{ menu.date_to|date:'d.m.Y' }}">
                <svg class="w-4 h-4 fill-neutral-800" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#trash" />
                </svg>
                Usuń
            </a>
            <a href="{% url 'menu:pdf' menu.id %}"class="max-w-max flex justify-center items-center gap-2
            border-[#d3af37] border-2  bg-gray-50 px-4 py-2 my-1 rounded-full font-semibold uppercase cursor-pointer
                hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2 hover:bg-[#d4bf79]
                transition-all duration-300">
                <svg class="w-4 h-4 fill-neutral-800" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#download" />
                </svg>
                PDF
            </a>
            {% endif %}
        </div>
        <div class="flex flex-wrap justify-between items-center gap-2">
            {% if menu %}
            <div class="flex flex-wrap gap-4 items-center justify-start">
                <h1 class="font-bold text-3xl text-teal-950 text-center my-4 md:my-6 lg:my-10">
                    Jadłospis od {{menu.date_from|date:"d.m."}} do {{ menu.date_to|date:"d.m.Y"}}
                </h1>
            </div>
            {% else %}
            <h1 class="font-bold text-3xl text-teal-950 mb-10 mt-8">Brak jadłospisu w wybranym okresie</h1>
            {% endif %}
            <form method="get"
                action='{% url "menu:date-detail" %}'
                hx-get='{% url "menu:date-detail" %}'
                hx-target="#menu-detail"
                hx-push-url="true"
                hx-swap="outerHTML"
                autocomplete="off"
                class="flex justify-center items-center gap-2 mx-2 my-4">
                <label for="datepicker" class="font-semibold">Przejdź do:</label>
                <div class="relative max-w-sm">
                    <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                        </svg>
                    </div>
                    <input datepicker id="datepicker" type="text"
                        name="selected_date"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-l-lg focus:ring-blue-500
                        focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500
                        dark:focus:border-blue-500" placeholder="Wybierz datę"
                    >
                </div>
                <button class="max-w-max bg-[#d3af37]
                px-4 py-2 my-1 rounded-r-lg -ml-2 font-semibold uppercase cursor-pointer
                hover:ring-2 hover:ring-[#d3af37] hover:ring-offset-2
                transition-all duration-300" type="submit">OK</button>
            </form>
        </div>
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-left rtl:text-right text-gray-700 dark:text-gray-400">
                <thead class="text-sm text-white uppercase bg-teal-700 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-4 py-3">
                            <span class="sr-only">Dzień</span>
                        </th>
                        <th scope="col" class="px-4 py-3">
                            Śniadanie
                        </th>
                        <th scope="col" class="px-4 py-3">
                            II&nbsp;śniadanie
                        </th>
                        <th scope="col" class="px-4 py-3">
                            Zupa
                        </th>
                        <th scope="col" class="px-4 py-3">
                            II danie
                        </th>
                        <th scope="col" class="px-4 py-3">
                            Podwieczorek
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <th scope="row" class="px-4 py-4 font-medium text-teal-900 whitespace-nowrap dark:text-white">
                            Poniedziałek
                        </th>
                        <td class="px-4 py-4">
                            {{ menu.breakfast1|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.snack1|richtext  }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.soup1|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.main1|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.dessert1|richtext }}
                        </td>
                    </tr>
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <th scope="row" class="px-4 py-4 font-medium text-teal-900 whitespace-nowrap dark:text-white">
                            Wtorek
                        </th>
                        <td class="px-4 py-4">
                            {{ menu.breakfast2|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.snack2|richtext  }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.soup2|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.main2|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.dessert2|richtext }}
                        </td>
                    </tr>
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <th scope="row" class="px-4 py-4 font-medium text-teal-900 whitespace-nowrap dark:text-white">
                            Środa
                        </th>
                        <td class="px-4 py-4">
                            {{ menu.breakfast3|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.snack3|richtext  }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.soup3|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.main3|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.dessert3|richtext }}
                        </td>
                    </tr>
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <th scope="row" class="px-4 py-4 font-medium text-teal-900 whitespace-nowrap dark:text-white">
                            Czwartek
                        </th>
                        <td class="px-4 py-4">
                            {{ menu.breakfast4|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.snack4|richtext  }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.soup4|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.main4|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.dessert4|richtext }}
                        </td>
                    </tr>
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <th scope="row" class="px-4 py-4 font-medium text-teal-900 whitespace-nowrap dark:text-white">
                            Piątek
                        </th>
                        <td class="px-4 py-4">
                            {{ menu.breakfast5|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.snack5|richtext  }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.soup5|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.main5|richtext }}
                        </td>
                        <td class="px-4 py-4">
                            {{ menu.dessert5|richtext }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="flex flex-wrap gap-4 w-full items-center justify-center mt-3">
            {% if prev %}
            <a href="{% url 'menu:detail' prev.id %}" class="flex gap-2 items-center font-semibold underline underline-offset-2 text-teal-800 hover:no-underline">
                <svg class="w-4 h-4 -mb-1 fill-teal-800" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#arrow-left" />
                </svg>Poprzedni</a>
            {% endif %}
            {% if next %}
            <a href="{% url 'menu:detail' next.id %}" class="flex gap-2 items-center font-semibold underline underline-offset-2 text-teal-800 hover:no-underline">Następny
                <svg class="w-4 h-4 -mb-1 fill-teal-800 rotate-180" alt="" aria-hidden="true">
                    <use href="{% static 'img/sprite.svg' %}#arrow-left" />
                </svg>
            </a>
            {% endif %}
        </div>
    </main>
</div>